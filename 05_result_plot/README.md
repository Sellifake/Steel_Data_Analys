# 钢卷性能预测 - 结果可视化

## 重要说明

**本模块需要手动准备数据文件**：在运行绘图脚本之前，需要将各建模模块的结果文件手动复制到对应的目录下：

- `02_frost_model/results/*/performance_summary.csv` → 复制到本模块对应目录
- `03_nonlinear_model/results/*/performance_summary.csv` → 复制到本模块对应目录  
- `04_neural_network/results/*/performance_summary.csv` → 复制到本模块对应目录
- `02_frost_model/results/*/feature_importance.csv` → 复制到本模块对应目录
- `03_nonlinear_model/results/*/feature_importance.csv` → 复制到本模块对应目录
- `04_neural_network/results/*/feature_importance.csv` → 复制到本模块对应目录

## 项目概述

本模块负责将各模型的训练与扰动分析结果进行可视化展示，便于快速对比不同模型、不同指标和不同特征的重要性与表现。通过统一的图表格式，直观展示不同建模方法的性能差异和特征重要性排序。

## 最终结果保存位置

- **回归指标对比**: `results/回归指标分析/` - 各模型性能指标对比图
- **特征重要性对比**: `results/特征重要性/` - 各模型特征重要性对比图
- **扰动预测结果**: `results/扰动预测结果/` - PDP效应图展示

## 代码文件详细说明

### 1. 01_plot_model_performance.py - 回归指标可视化

**功能**: 汇总并绘制不同模型的回归性能指标对比图

**输入文件**:
- `02_frost_model/results/*/performance_summary.csv` - 树模型性能汇总
- `03_nonlinear_model/results/*/performance_summary.csv` - 非线性模型性能汇总
- `04_neural_network/results/*/performance_summary.csv` - 神经网络模型性能汇总

**输出文件**:
- `results/回归指标分析/回归指标对比.png` - 回归指标对比图
- `results/回归指标分析/` - 其他相关图表

**主要功能**:
- 读取各模块的性能汇总CSV文件
- 提取MAE、RMSE、R²等关键指标
- 生成多模型性能对比柱状图
- 支持不同性能指标的分组展示
- 自动调整图表布局和标签

### 2. 02_plot_feature_importance.py - 特征重要性可视化

**功能**: 汇总并绘制不同模型的特征重要性对比图

**输入文件**:
- `02_frost_model/results/*/feature_importance.csv` - 树模型特征重要性
- `03_nonlinear_model/results/*/feature_importance.csv` - 非线性模型特征重要性
- `04_neural_network/results/*/feature_importance.csv` - 神经网络模型特征重要性

**输出文件**:
- `results/特征重要性/特征重要性对比.png` - 特征重要性对比图
- `results/特征重要性/` - 其他相关图表

**主要功能**:
- 读取各模块的特征重要性CSV文件
- 提取Top-N重要特征进行对比
- 生成多模型特征重要性对比条形图
- 支持不同特征重要性指标的统一展示
- 自动排序和颜色编码

## 可视化结果类型

### 回归指标对比
- **MAE对比**: 平均绝对误差的模型间对比
- **RMSE对比**: 均方根误差的模型间对比
- **R²对比**: 决定系数的模型间对比
- **综合性能**: 多指标综合评估

### 特征重要性对比
- **树模型重要性**: 基于信息增益的特征重要性
- **线性模型重要性**: 基于系数权重的特征重要性
- **神经网络重要性**: 基于注意力权重的特征重要性
- **统一排序**: 多模型特征重要性综合排序

### 扰动预测结果
- **PDP效应图**: 部分依赖图展示特征对目标变量的影响
- **置信区间**: 90%置信区间的预测不确定性
- **趋势分析**: 关键工艺参数的影响趋势

## 技术实现细节

### 数据处理
- **CSV读取**: 自动识别和读取各模块的结果文件
- **数据清洗**: 处理缺失值和异常值
- **格式统一**: 标准化不同模块的输出格式

### 图表生成
- **matplotlib绘图**: 使用matplotlib生成高质量图表
- **中文字体**: 支持SimHei字体显示中文标签
- **图表样式**: 统一的配色方案和布局风格
- **高分辨率**: 300 DPI输出适合论文发表

### 文件管理
- **自动创建目录**: 自动创建results子目录
- **文件命名**: 统一的文件命名规范
- **版本控制**: 支持Git版本控制（通过.gitignore配置）

## 扩展功能

### 新增模型支持
- **模型注册**: 在绘图脚本中注册新模型
- **结果路径**: 配置新模型的结果文件路径
- **图表更新**: 自动更新对比图表

### 自定义可视化
- **图表样式**: 支持自定义颜色和样式
- **指标选择**: 支持选择特定指标进行对比
- **输出格式**: 支持多种图片格式输出

## 注意事项

- 请确保已运行所有建模模块生成结果文件
- 结果文件路径需要与脚本中的路径配置一致
- 建议在生成图表前检查各模块的结果文件完整性
- 图表生成需要matplotlib和相关依赖库
- 中文字体显示需要系统安装SimHei字体
- 大尺寸图表生成可能需要较多内存


